<?php

class ExploitationAutresForm extends acCouchdbObjectForm {

    public function configure() {
        $this->setWidgets(array(
            'jeunes_vignes' => new sfWidgetFormInputFloat(),
        ));

        $this->setValidators(array(
            'jeunes_vignes' => new sfValidatorNumber(array('required' => false)),
        ));

        $this->widgetSchema->setLabel('jeunes_vignes', 'ares');

        if($this->getObject()->exist('jus_raisin_superficie') && $this->getObject()->exist('jus_raisin_volume')) {
            $this->setWidget('jus_raisin_superficie', new sfWidgetFormInputFloat());
            $this->setValidator('jus_raisin_superficie', new sfValidatorNumber(array('required' => false)));
            $this->setWidget('jus_raisin_volume', new sfWidgetFormInputFloat());
            $this->setValidator('jus_raisin_volume', new sfValidatorNumber(array('required' => false)));

            $this->widgetSchema->setLabel('jus_raisin_superficie', 'Superficie :');
            $this->widgetSchema->setLabel('jus_raisin_volume', 'Volume :');
        }

        //$this->validatorSchema->setPostValidator();

        $this->widgetSchema->setNameFormat('exploitation_autres[%s]');
        $this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);

    }

}